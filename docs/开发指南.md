# 开发指南

## 开发环境搭建

### 必需软件
- **JDK 20+**: 推荐使用OpenJDK或Oracle JDK
- **Node.js 16+**: 推荐使用LTS版本
- **MySQL 8.0+**: 数据库服务器
- **Maven 3.6+**: Java项目构建工具
- **IDE**: 推荐IntelliJ IDEA或Eclipse
- **Git**: 版本控制工具

### 环境配置
```bash
# 检查Java版本
java -version

# 检查Maven版本
mvn -version

# 检查Node.js版本
node -v
npm -v

# 检查MySQL版本
mysql --version
```

## 项目结构说明

### 后端项目结构
```
zhouxuelian8/
├── src/
│   ├── main/
│   │   ├── java/cn/smxy/zhouxuelian8/
│   │   │   ├── aop/           # 切面编程
│   │   │   ├── config/        # 配置类
│   │   │   ├── Controller/    # 控制器层
│   │   │   ├── entity/        # 实体类
│   │   │   ├── exception/     # 异常处理
│   │   │   ├── mapper/        # 数据访问层
│   │   │   ├── service/       # 业务逻辑层
│   │   │   └── util/          # 工具类
│   │   └── resources/
│   │       ├── mapper/        # MyBatis映射文件
│   │       └── application.properties # 配置文件
│   └── test/                  # 测试代码
└── pom.xml                    # Maven配置
```

### 前端项目结构
```
zhouxuelian8 前端/
├── src/
│   ├── components/            # 公共组件
│   ├── views/                 # 页面组件
│   ├── router/                # 路由配置
│   ├── store/                 # 状态管理
│   ├── assets/                # 静态资源
│   └── main.js                # 入口文件
├── public/                    # 公共资源
└── package.json               # 依赖配置
```

## 开发规范

### 代码规范

#### Java代码规范
- 类名使用大驼峰命名法：`ArticleController`
- 方法名使用小驼峰命名法：`findArticleById`
- 常量使用全大写加下划线：`MAX_FILE_SIZE`
- 包名使用小写：`cn.smxy.zhouxuelian8`

#### Vue代码规范
- 组件名使用大驼峰命名法：`ArticleManager`
- 方法名使用小驼峰命名法：`handleDelete`
- 文件名使用小写加连字符：`article-manager.vue`
- 变量名使用小驼峰命名法：`articleList`

### 注释规范
```java
/**
 * 根据ID查询文章
 * @param id 文章ID
 * @return 文章对象
 */
public Article findById(Integer id) {
    // 实现逻辑
}
```

```javascript
/**
 * 删除文章
 * @param {number} id 文章ID
 */
handleDelete(id) {
    // 实现逻辑
}
```

## 开发流程

### 1. 功能开发流程
1. **需求分析**: 明确功能需求和业务逻辑
2. **数据库设计**: 设计数据表结构和关系
3. **后端开发**: 实现API接口和业务逻辑
4. **前端开发**: 实现用户界面和交互逻辑
5. **测试验证**: 功能测试和集成测试
6. **代码审查**: 代码质量检查和优化

### 2. 代码提交流程
```bash
# 1. 创建功能分支
git checkout -b feature/新功能名称

# 2. 开发代码
# ... 编写代码 ...

# 3. 提交代码
git add .
git commit -m "feat: 添加新功能描述"

# 4. 推送到远程
git push origin feature/新功能名称

# 5. 创建Pull Request
# 在GitHub上创建PR，等待代码审查
```

## 技术要点

### 后端技术要点

#### Spring Boot配置
```properties
# 数据库配置
spring.datasource.url=jdbc:mysql://localhost:3306/lmodeldb
spring.datasource.username=root
spring.datasource.password=your_password

# MyBatis配置
mybatis.mapper-locations=classpath:mapper/*.xml
mybatis.type-aliases-package=cn.smxy.zhouxuelian8.entity

# 文件上传配置
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=100MB
```

#### JWT认证实现
```java
@Component
public class JWTUtil {
    private static final String SECRET = "your_jwt_secret";
    private static final long EXPIRATION = 86400000; // 24小时
    
    public String generateToken(String username, String role) {
        return JWT.create()
                .withClaim("username", username)
                .withClaim("role", role)
                .withExpiresAt(new Date(System.currentTimeMillis() + EXPIRATION))
                .sign(Algorithm.HMAC256(SECRET));
    }
}
```

#### AOP切面日志
```java
@Aspect
@Component
public class LogRecordAspect {
    
    @Around("@annotation(LogRecord)")
    public Object logExecutionTime(ProceedingJoinPoint joinPoint) throws Throwable {
        long startTime = System.currentTimeMillis();
        Object result = joinPoint.proceed();
        long endTime = System.currentTimeMillis();
        
        // 记录执行时间
        logExecutionTime(joinPoint, endTime - startTime);
        
        return result;
    }
}
```

### 前端技术要点

#### Vue组件通信
```javascript
// 父组件向子组件传值
<child-component :data="parentData" @event="handleEvent" />

// 子组件接收和发送事件
export default {
    props: ['data'],
    methods: {
        sendEvent() {
            this.$emit('event', data);
        }
    }
}
```

#### Vuex状态管理
```javascript
// store/index.js
export default new Vuex.Store({
    state: {
        user: null,
        token: null
    },
    mutations: {
        setUser(state, user) {
            state.user = user;
        },
        setToken(state, token) {
            state.token = token;
        }
    },
    actions: {
        login({ commit }, credentials) {
            // 登录逻辑
            commit('setUser', user);
            commit('setToken', token);
        }
    }
});
```

#### 路由守卫
```javascript
// router/index.js
router.beforeEach((to, from, next) => {
    const token = localStorage.getItem('token');
    
    if (to.meta.requiresAuth && !token) {
        next('/login');
    } else {
        next();
    }
});
```

## 测试指南

### 单元测试
```java
@SpringBootTest
class ArticleServiceTest {
    
    @Autowired
    private ArticleService articleService;
    
    @Test
    void testFindById() {
        Article article = articleService.findById(1);
        assertNotNull(article);
        assertEquals("文章标题", article.getTitle());
    }
}
```

### 集成测试
```java
@SpringBootTest
@AutoConfigureTestDatabase
class ArticleControllerTest {
    
    @Autowired
    private TestRestTemplate restTemplate;
    
    @Test
    void testFindAll() {
        ResponseEntity<String> response = restTemplate.getForEntity("/article/findAll", String.class);
        assertEquals(200, response.getStatusCodeValue());
    }
}
```

## 部署指南

### 开发环境部署
```bash
# 后端启动
cd zhouxuelian8/zhouxuelian8
mvn spring-boot:run

# 前端启动
cd "zhouxuelian8 前端/zhouxuelian8"
npm run serve
```

### 生产环境部署
```bash
# 后端打包
mvn clean package

# 前端构建
npm run build

# 部署到服务器
scp target/news-server-0.0.1-SNAPSHOT.jar user@server:/opt/app/
scp -r dist/* user@server:/var/www/html/
```

## 常见问题解决

### 后端常见问题

#### 1. 数据库连接失败
- 检查MySQL服务是否启动
- 检查数据库连接配置
- 检查防火墙设置

#### 2. 端口占用
```bash
# 查看端口占用
netstat -ano | findstr :8089

# 杀死进程
taskkill /PID <进程ID> /F
```

#### 3. 依赖下载失败
```bash
# 使用阿里云镜像
mvn clean install -Dmaven.repo.local=~/.m2/repository
```

### 前端常见问题

#### 1. 依赖安装失败
```bash
# 清除缓存
npm cache clean --force

# 使用淘宝镜像
npm config set registry https://registry.npmmirror.com
```

#### 2. 构建失败
```bash
# 删除node_modules重新安装
rm -rf node_modules package-lock.json
npm install
```

#### 3. 跨域问题
在vue.config.js中配置代理：
```javascript
devServer: {
    proxy: {
        '/api': {
            target: 'http://localhost:8089/zhouxuelian8',
            changeOrigin: true,
            pathRewrite: {
                '^/api': ''
            }
        }
    }
}
```

## 性能优化

### 后端优化
1. **数据库优化**: 合理使用索引，优化SQL查询
2. **缓存策略**: 使用Redis缓存热点数据
3. **连接池优化**: 配置合适的数据库连接池参数

### 前端优化
1. **代码分割**: 使用路由懒加载
2. **图片优化**: 压缩图片，使用WebP格式
3. **CDN加速**: 静态资源使用CDN

## 安全考虑

### 后端安全
1. **输入验证**: 对所有用户输入进行验证
2. **SQL注入防护**: 使用参数化查询
3. **XSS防护**: 对输出内容进行转义

### 前端安全
1. **XSS防护**: 使用v-html时注意内容安全
2. **CSRF防护**: 使用CSRF Token
3. **敏感信息保护**: 不在前端存储敏感信息 