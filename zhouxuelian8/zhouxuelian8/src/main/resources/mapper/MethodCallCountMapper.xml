<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.smxy.zhouxuelian8.mapper.MethodCallCountMapper">
    <!-- 根据方法名查询记录 -->
    <select id="findByMethodName" resultMap="MethodCallCountResultMap">
        SELECT * FROM methodcallcount WHERE methodname = #{methodName}
    </select>
    <!-- 更新方法调用次数 -->
    <update id="updateCallCount">
        UPDATE methodcallcount
        SET callcount = callcount + 1
        WHERE methodname = #{methodName}
    </update>
    <!-- 插入新记录 -->
    <insert id="insert">
        INSERT INTO methodcallcount (methodname, callcount)
        VALUES (#{methodName}, #{callCount})
    </insert>
    <!-- resultMap 定义 -->
    <resultMap id="MethodCallCountResultMap" type="cn.smxy.zhouxuelian8.entity.MethodCallCount">
        <id property="id" column="id"/>
        <result property="methodName" column="methodname"/>
        <result property="callCount" column="callcount"/>
    </resultMap>
</mapper>